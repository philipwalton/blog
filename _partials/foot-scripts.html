<script>
(function(window, document, location) {
  {{{inlineJavaScript}}}
}(window, document, location));
</script>

<!-- Load GA after the `window.ga` is initialized or you'll get errors. -->

{{#is site.env 'production'}}
  <script async src="//www.google-analytics.com/analytics.js"></script>
{{else}}
  <script>
    // window.ga_debug = {trace: true};
  </script>
  <script async src="//www.google-analytics.com/analytics_debug.js"></script>
{{/is}}

<!-- Load HTML Inspector in dev mode. -->

{{#is site.env 'development'}}
  <script src="//cdnjs.cloudflare.com/ajax/libs/html-inspector/0.8.2/html-inspector.js"></script>
  <script>
    HTMLInspector.rules.extend("unused-classes", function(config) {
      config.whitelist = config.whitelist.concat([/^wf-/]);
      return config;
    });

    HTMLInspector.rules.extend("script-placement", function(config) {
      config.whitelist = config.whitelist.concat(['#ga-setup']);
      return config;
    });

    // start the inspection
    HTMLInspector.inspect();
  </script>
{{/is}}
